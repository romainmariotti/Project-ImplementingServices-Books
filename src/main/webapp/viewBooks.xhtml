<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
>
  <h:body>
    <h:form>
      <h:outputLabel value="Filter by Category: " />
      <h:selectOneMenu value="#{bookBean.categoryFilter}" onchange="submit()">
        <f:selectItem itemValue="" itemLabel="All Categories" />
        <f:selectItems
          value="#{bookBean.categories}"
          var="category"
          itemValue="#{category.name}"
          itemLabel="#{category.name}"
        />
      </h:selectOneMenu>

      <h:outputLabel value="Filter by Writer: " />
      <h:selectOneMenu value="#{bookBean.writerFilter}" onchange="submit()">
        <f:selectItem itemValue="" itemLabel="All Writers" />
        <f:selectItems
          value="#{bookBean.writers}"
          var="writer"
          itemValue="#{writer.firstname} #{writer.lastname}"
          itemLabel="#{writer.firstname} #{writer.lastname}"
        />
      </h:selectOneMenu>

      <h:commandButton value="Search" action="#{bookBean.filterByCategory}" />

      <h:outputLabel value="Filter by Title: " />
      <h:inputText value="#{bookBean.titleFilter}" />
      <h:commandButton value="Search" action="#{bookBean.filterByTitle}" />

      <h:dataTable value="#{bookBean.filteredBooks}" var="book">
        <h:column>
          <f:facet name="header">Title</f:facet>
          #{book.title}
        </h:column>
        <h:column>
          <f:facet name="header">Category</f:facet>
          #{book.category.name}
        </h:column>
        <h:column>
          <f:facet name="header">Writer</f:facet>
          #{book.writer.firstname} #{book.writer.lastname}
        </h:column>
      </h:dataTable>
    </h:form>
  </h:body>
</html>
